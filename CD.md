# CD


## Continuous Delivery(CD)
- 소프트웨어 개발 방법론 중 하나
    - 소프트웨어를 작은 단위로 자주 업데이트하고 배포하는 것을 목표로 함
- 소프트웨어가 언제든지 출시 가능한 상태를 유지
- 파이프라인의 중요한 구성 요소

### 개념
- 모든 코드 변경사항은 자동화된 빌드와 테스트 절차를 거쳐서 진행
    - 코드의 안정성과 품질을 보장
- 자동 배포 파이프라인
    - 코드 변경 사항이 자동으로 프로덕션 환경에 배포될 수 있도록 배포 파이프라인 설정
- 버젼 관리
    - 소스코드와 환경 설정 파일을 버전 관리 시스템에 저장하여, 언제든지 이전 버전으로 돌아갈 수 있도록 함
- 모니터링 및 피드백
    - 배포된 소프트웨어가 실제 환경에서 어떻게 동작하는지 모니터링
        - 문제 발생시 신속하게 피드백을 받아 수정

## ArgoCD
- 애플리케이션의 배포와 관리를 자동화하여 관리할 수 있는 GitOps 도구
    - gitOps
        - git repository에 저장된 manifest 파일을 기준으로 배포
        - 애플리케이션 상태를 관리하여 cluster와 git repository 간의 상태를 동기화
        - 모든 변경 사항이 git에 기록되기 때문에, 누가 언제 무엇을 변경했는지 확인 가능
        - 코드 리뷰와 승인 절차를 통해 변경 사항을 신중하게 적용 가능
        - 반복적인 작업을 자동화하여 효율성을 높이고, 사람에 의한 실수를 줄일 수 있음

## 모니터링
- 모니터링
    - 쿠버네티스에서는 이벤트 관리 및 애플리케이션에 대한 로깅 필요
    - 시스템의 상태를 실시간으로 감시하고, 특정 조건이 발생했을 때 관리자에게 알림 필요

- 로깅
    - 쿠버네티스에 대한 상태를 관리할 수 있음
        - event log(describe)
    - 배포 한 애플리케이션에 대한 관리를 할 수 있음
        - logs(log)

- 알람
    - 로깅 뿐 아니라, 장애대응 및 모니터링을 위해서 알람도 필수
        - 모니터링 관련 도구 중 알람을 지원하는 앱들도 다수 존재

## 알람

### 알람 처리
- 메신저, 메일, 백오피스 도구, 문자, 전화, ...

### Slack API 기능
- slash command
- Webhook
    - send msg
    - send photo
- modal


## 마무리
- 현재까지 알게 된 내용
    - Network, Linux, AWS
    - Docker
    - Kubernetes
    - CI / CD
    - GIT

- 앞으로 진행 가능한 미션
    - CI/CD 파이프라인 구성
    - Docker를 사용하여 애플리케이션을 컨테이너화하고 배포
    - 인프라 장애에 대한 디스코스(슬랙) 알림 봇을 만드는 미션
    - Ansible, Terraform을 사용하여 인프라 자동화
    - Kubernetes를 사용하여 컨테이너화된 애플리케이션을 배포하고 관리
    - 클라우드 서비스의 기본 개념 실습
    - ....



## 실습 1

### Argocd 앱 배포
1. microk8s enable argocd
2. argocd svc type 변경
3. port-forward를 사용하여, 호스트에서 argocd dashboard 접근
    - kubernetes dashboard와 동일하게 세팅하면 접근 가능
4. gitOps 사용

### 추가 실습
- autosync, sync 사용
- argocd 상태에 따라 알림을 받을 수 있도록 진행



## 실습 2

### Slack API를 통한 알람 받기
- 슬랙 또는 디스코드 API를 사용하여 관리하는 앱들 모니터링
    1. 슬랙에 Bot을 추가하여, 특정 채널에 메시지 전송
    2. Slash Command를 통하여, 코드 실행
        - slack slash app을 만들어, 특정 요청을 처리할 수 있는 기능 만들어보기

### 추가 실습
- 어떤 상황에 알람 및 메신저를 사용할 수 있는지 고민해보기
- Slack
    - Modal 기능 사용해보기
    - 다른 기능 확인해보기

## 실습3
- 현재까지 배운 과정을 통하여, 이제 애플리케이션에 대한 빌드/배포 진행
1. 간단한 앱 구현
    - git을 통하여 형상 관리 진행
2. CI(Jenkins / GitHubAction / ..) 사용
    - 이미지는 dockerhub 사용
    - 빌드 성공, 과정에 대한 알람 받기
3. CD(argocd) 사용
    - 배포 과정에 대한 상태관리를 알람으로 모니터링
















